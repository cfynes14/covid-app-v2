{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\cpfyn\\\\Documents\\\\Coding\\\\Projects\\\\covid-app\\\\covid-19\\\\client\\\\src\\\\Components\\\\SearchBar\\\\searchBar.js\";\nimport React from 'react';\nimport './searchBar.css';\n\nvar SearchBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(SearchBar, _React$Component);\n\n  var _super = _createSuper(SearchBar);\n\n  function SearchBar(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBar);\n\n    _this = _super.call(this, props);\n    _this.obtainNames = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, body;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('/localAuthorities');\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              body = _context.sent;\n\n              if (!(response.status !== 200)) {\n                _context.next = 8;\n                break;\n              }\n\n              throw Error(body.message);\n\n            case 8:\n              console.log(response);\n              console.log(body);\n              return _context.abrupt(\"return\", body);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.state = {\n      area: '',\n      names: []\n    };\n    _this.handleLocationChange = _this.handleLocationChange.bind(_assertThisInitialized(_this));\n    _this.handleSearch = _this.handleSearch.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SearchBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.obtainNames().then(function (res) {\n        return _this2.setState({\n          names: res\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"handleLocationChange\",\n    value: function handleLocationChange(e) {\n      this.setState({\n        area: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSearch\",\n    value: function handleSearch(e) {\n      this.props.searchLocation(this.state.area);\n      var area = this.state.area;\n\n      if (!area || !isNaN(area)) {\n        alert(\"Please enter a valid location\");\n      } else {\n        this.props.searchLocation(area);\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var names = this.state.names;\n      var optionTemplate = names.map(function (v) {\n        return /*#__PURE__*/_jsxDEV(\"option\", {\n          value: v.id,\n          children: v.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, _this3);\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"searchBar\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"localAuthority\",\n            onChange: this.handleLocationChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Select an area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 25\n            }, this), optionTemplate]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return SearchBar;\n}(React.Component);\n\nexport default SearchBar;","map":{"version":3,"sources":["C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/src/Components/SearchBar/searchBar.js"],"names":["React","SearchBar","props","obtainNames","fetch","response","json","body","status","Error","message","console","log","state","area","names","handleLocationChange","bind","handleSearch","then","res","setState","catch","err","e","target","value","searchLocation","isNaN","alert","preventDefault","optionTemplate","map","v","id","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,iBAAP;;IAGMC,S;;;;;AACF,qBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8BAAMA,KAAN;AADc,UAkBlBC,WAlBkB,yEAkBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACaC,KAAK,CAAC,mBAAD,CADlB;;AAAA;AACJC,cAAAA,QADI;AAAA;AAAA,qBAESA,QAAQ,CAACC,IAAT,EAFT;;AAAA;AAEJC,cAAAA,IAFI;;AAAA,oBAINF,QAAQ,CAACG,MAAT,KAAoB,GAJd;AAAA;AAAA;AAAA;;AAAA,oBAKAC,KAAK,CAACF,IAAI,CAACG,OAAN,CALL;;AAAA;AAOVC,cAAAA,OAAO,CAACC,GAAR,CAAYP,QAAZ;AACAM,cAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AARU,+CASHA,IATG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAlBI;AAEd,UAAKM,KAAL,GAAa;AACVC,MAAAA,IAAI,EAAE,EADI;AAEVC,MAAAA,KAAK,EAAE;AAFG,KAAb;AAKA,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BC,IAA1B,+BAA5B;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB;AARc;AAUjB;;;;wCAEkB;AAAA;;AACf,WAAKd,WAAL,GACCgB,IADD,CACM,UAAAC,GAAG;AAAA,eAAI,MAAI,CAACC,QAAL,CAAc;AAAEN,UAAAA,KAAK,EAAEK;AAAT,SAAd,CAAJ;AAAA,OADT,EAECE,KAFD,CAEO,UAAAC,GAAG;AAAA,eAAIZ,OAAO,CAACC,GAAR,CAAYW,GAAZ,CAAJ;AAAA,OAFV;AAGH;;;yCAegBC,C,EAAE;AACnB,WAAKH,QAAL,CAAc;AAAEP,QAAAA,IAAI,EAAEU,CAAC,CAACC,MAAF,CAASC;AAAjB,OAAd;AACH;;;iCAIYF,C,EAAE;AACX,WAAKtB,KAAL,CAAWyB,cAAX,CAA0B,KAAKd,KAAL,CAAWC,IAArC;AACA,UAAIA,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;;AACA,UAAI,CAACA,IAAD,IAAS,CAACc,KAAK,CAACd,IAAD,CAAnB,EAA2B;AACvBe,QAAAA,KAAK,CAAC,+BAAD,CAAL;AACH,OAFD,MAEO;AACH,aAAK3B,KAAL,CAAWyB,cAAX,CAA0Bb,IAA1B;AACJU,QAAAA,CAAC,CAACM,cAAF;AACC;AACJ;;;6BAEW;AAAA;;AACJ,UAAIf,KAAK,GAAG,KAAKF,KAAL,CAAWE,KAAvB;AACA,UAAIgB,cAAc,GAAGhB,KAAK,CAACiB,GAAN,CAAU,UAAAC,CAAC;AAAA,4BAC5B;AAAQ,UAAA,KAAK,EAAEA,CAAC,CAACC,EAAjB;AAAA,oBAAsBD,CAAC,CAACP;AAAxB;AAAA;AAAA;AAAA;AAAA,kBAD4B;AAAA,OAAX,CAArB;AAGA,0BACI;AAAA,+BACI;AAAO,UAAA,GAAG,EAAC,WAAX;AAAA,iCACI;AAAQ,YAAA,IAAI,EAAC,gBAAb;AAA8B,YAAA,QAAQ,EAAE,KAAKV,oBAA7C;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEKe,cAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAYH;;;;EAlEmB/B,KAAK,CAACmC,S;;AAqE9B,eAAelC,SAAf","sourcesContent":["import React from 'react';\r\nimport './searchBar.css';\r\n\r\n\r\nclass SearchBar extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n           area: '',\r\n           names: [] \r\n        }\r\n        \r\n        this.handleLocationChange = this.handleLocationChange.bind(this);\r\n        this.handleSearch = this.handleSearch.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.obtainNames()\r\n        .then(res => this.setState({ names: res }))\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    obtainNames = async () => {\r\n        const response = await fetch('/localAuthorities')\r\n        const body = await response.json()\r\n\r\n        if (response.status !== 200) {\r\n            throw Error(body.message)\r\n        }\r\n        console.log(response);\r\n        console.log(body)\r\n        return body;\r\n    }\r\n\r\n\r\nhandleLocationChange(e){\r\n    this.setState({ area: e.target.value });\r\n}\r\n\r\n\r\n\r\nhandleSearch(e){\r\n    this.props.searchLocation(this.state.area);\r\n    let area = this.state.area;\r\n    if (!area || !isNaN(area)) {\r\n        alert(\"Please enter a valid location\")\r\n    } else {\r\n        this.props.searchLocation(area);\r\n    e.preventDefault();\r\n    }\r\n}\r\n\r\n    render(){\r\n        let names = this.state.names\r\n        let optionTemplate = names.map(v => (\r\n            <option value={v.id}>{v.value}</option>\r\n        ));\r\n        return(\r\n            <div>             \r\n                <label for=\"searchBar\"> \r\n                    <select name=\"localAuthority\" onChange={this.handleLocationChange}>\r\n                        <option>Select an area</option>\r\n                        {optionTemplate}\r\n                    </select>\r\n                    {/* <button onClick={this.handleSearch} className=\"btn btn-success\">Submit</button> */}\r\n                </label>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}