{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\cpfyn\\\\Documents\\\\Coding\\\\Projects\\\\covid-app\\\\covid-19\\\\client\\\\src\\\\Components\\\\Map\\\\map.js\";\nimport { divIcon } from 'leaflet';\nimport React, { createRef } from 'react';\nimport { MapContainer, Marker, Popup, TileLayer, GeoJSON } from \"react-leaflet\";\nimport axios from 'axios';\nimport Location from '../../utils/location';\nimport Card1 from '../Card/card';\n\nvar MyMap = /*#__PURE__*/function (_React$Component) {\n  _inherits(MyMap, _React$Component);\n\n  var _super = _createSuper(MyMap);\n\n  function MyMap(props) {\n    var _this;\n\n    _classCallCheck(this, MyMap);\n\n    _this = _super.call(this, props);\n\n    _this.searchLocation = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(location) {\n        var response, body;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log('searching location');\n                response = axios.get('http://localhost:5000/location', {\n                  params: {\n                    location: location\n                  }\n                });\n                _context.next = 4;\n                return response.json();\n\n              case 4:\n                body = _context.sent;\n\n                if (!(response.status !== 200)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw Error(body.message);\n\n              case 7:\n                return _context.abrupt(\"return\", body);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.countryStyle = {\n      fillColor: 'red'\n    };\n    _this.state = {\n      location: 0,\n      latitude: 51.5,\n      longitude: 0.12,\n      geoJson: ''\n    };\n    _this.clickLocation = _this.clickLocation.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.returnGeoJson = _this.returnGeoJson.bind(_assertThisInitialized(_this));\n    _this.mapRef = /*#__PURE__*/createRef();\n    return _this;\n  }\n\n  _createClass(MyMap, [{\n    key: \"clickLocation\",\n    value: function clickLocation(area) {\n      this.setState({\n        location: area\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log('mounting component');\n      this.searchLocation().then(function (res) {\n        return _this2.setState({\n          geojson: res\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      var map = this.mapRef.current.leafletElement;\n      map.fitBounds(this.state.latitude, this.state.longitude);\n    }\n  }, {\n    key: \"returnGeoJson\",\n    value: function returnGeoJson() {\n      console.log(this.state.geoJson);\n      var geoJsonLayer = this.state.geoJson;\n      return /*#__PURE__*/_jsxDEV(GeoJSON, {\n        style: this.countryStyle,\n        data: geoJsonLayer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log('rendering component');\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(MapContainer, {\n          center: [this.state.latitude, this.state.longitude],\n          zoom: 5.5,\n          children: [/*#__PURE__*/_jsxDEV(Card1, {\n            searchLocation: this.searchLocation,\n            infections: \"12000\",\n            deaths: \"400\",\n            hospitalisations: \"150\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n            url: \"https://api.maptiler.com/maps/uk-openzoomstack-road/256/{z}/{x}/{y}.png?key=X7qpq0iR5R376h5yMZXo\",\n            attribution: \"<a href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\">\\xA9 MapTiler</a> <a href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\">\\xA9 OpenStreetMap contributors</a>\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Marker, {\n            position: [this.state.latitude, this.state.longitude]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(GeoJSON, {\n            style: this.countryStyle,\n            data: this.state.geoJson\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this);\n    }\n  }]);\n\n  return MyMap;\n}(React.Component);\n\nexport default MyMap;","map":{"version":3,"sources":["C:/Users/cpfyn/Documents/Coding/Projects/covid-app/covid-19/client/src/Components/Map/map.js"],"names":["divIcon","React","createRef","MapContainer","Marker","Popup","TileLayer","GeoJSON","axios","Location","Card1","MyMap","props","searchLocation","location","console","log","response","get","params","json","body","status","Error","message","countryStyle","fillColor","state","latitude","longitude","geoJson","clickLocation","bind","handleClick","returnGeoJson","mapRef","area","setState","then","res","geojson","catch","err","map","current","leafletElement","fitBounds","geoJsonLayer","Component"],"mappings":"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","sourcesContent":["import { divIcon } from 'leaflet';\r\nimport React, { createRef } from 'react';\r\nimport { MapContainer, Marker, Popup, TileLayer, GeoJSON } from \"react-leaflet\";\r\nimport axios from 'axios';\r\n\r\nimport Location from '../../utils/location';\r\n\r\nimport Card1 from '../Card/card';\r\n\r\n\r\nclass MyMap extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            location: 0,\r\n            latitude: 51.5,\r\n            longitude: 0.12,\r\n            geoJson: ''\r\n        }\r\n        this.clickLocation = this.clickLocation.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.returnGeoJson = this.returnGeoJson.bind(this);\r\n        this.mapRef = createRef();\r\n      }\r\n\r\n      clickLocation(area){\r\n          this.setState({\r\n              location: area})\r\n      }\r\n\r\n      componentDidMount(){\r\n          console.log('mounting component')\r\n        this.searchLocation()\r\n        .then(res => this.setState({ geojson: res }))\r\n        .catch(err => console.log(err))\r\n    }\r\n      \r\n      searchLocation = async (location) => {\r\n        console.log('searching location')\r\n        const response = axios.get('http://localhost:5000/location', { params: {location} })\r\n        const body = await response.json()\r\n\r\n        if (response.status !== 200) {\r\n            throw Error(body.message)\r\n        }\r\n        return body;\r\n        // .then(result => {\r\n        //     console.log('returned')\r\n        //     this.setState({\r\n        //         geoJson: result.data\r\n        //     })       \r\n        // })\r\n        // .catch(err => {\r\n        //     console.log(err);\r\n        // })\r\n        \r\n      }\r\n\r\n      handleClick() {\r\n          const map = this.mapRef.current.leafletElement;\r\n          map.fitBounds(this.state.latitude, this.state.longitude)\r\n      }\r\n\r\n      returnGeoJson(){\r\n        console.log(this.state.geoJson)\r\n        let geoJsonLayer = this.state.geoJson\r\n        return <GeoJSON style={this.countryStyle} data={geoJsonLayer} />\r\n    }\r\n\r\n      countryStyle = {\r\n          fillColor: 'red'\r\n      };\r\n      \r\n       \r\n    render(){\r\n        console.log('rendering component') \r\n        \r\n        return(\r\n        <div>\r\n    {/* <button onClick={this.handleClick}>CLICK ME</button> */}\r\n      <MapContainer center={[this.state.latitude, this.state.longitude]} zoom={5.5}>\r\n            <Card1 searchLocation={this.searchLocation} infections=\"12000\" deaths=\"400\" hospitalisations=\"150\"/>\r\n            <TileLayer\r\n            url=\"https://api.maptiler.com/maps/uk-openzoomstack-road/256/{z}/{x}/{y}.png?key=X7qpq0iR5R376h5yMZXo\" \r\n            attribution='<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'\r\n            />\r\n            {/* <TileLayer fitBounds={[this.state.latitude, this.state.longitude]} /> */}\r\n            <Marker position={[\r\n                this.state.latitude,\r\n                this.state.longitude]}\r\n            /> \r\n\r\n            <GeoJSON style={this.countryStyle} data={this.state.geoJson} />\r\n            \r\n\r\n            {/* <Popup>\r\n              <span>\r\n                <h4>{this.props.searcLocation}</h4>\r\n              </span>\r\n            </Popup> */}\r\n           \r\n        </MapContainer>\r\n        </div>\r\n        \r\n                    \r\n        )\r\n    }\r\n}\r\n\r\nexport default MyMap;"]},"metadata":{},"sourceType":"module"}