(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{18:function(t,a,e){},36:function(t,a,e){},56:function(t,a,e){},57:function(t,a,e){},58:function(t,a,e){},61:function(t,a,e){},62:function(t,a,e){},63:function(t,a,e){"use strict";e.r(a);var n=e(1),s=e.n(n),i=e(19),c=e.n(i),o=(e(36),e(5)),r=e.n(o),l=e(6),d=e(11),h=e(7),j=e(8),b=e(2),u=e(10),p=e(9),f=e(13),O=e.n(f),m=(e(30),e(56),e(66)),x=e(67),y=e(68),v=(e(57),e(58),e(12)),w=e.n(v);e(18);var S=function(t){var a=t.split(" ")[0].split("-");return[a[2],a[1],a[0]].join("-")},g=e(0),C=function(t){var a=t.handleClose,e=t.show,n=t.children,s=e?"modal display-block":"modal display-none";return Object(g.jsx)("div",{className:s,children:Object(g.jsxs)("section",{className:"modal-main",children:[Object(g.jsx)("div",{className:"nationalStatTitle",children:Object(g.jsx)("h3",{children:"National Statistics for UK"})}),Object(g.jsx)("br",{}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total infections: ",Object(g.jsx)("span",{children:n.totalInfections})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total deaths: ",Object(g.jsx)("span",{children:n.totalDeaths})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["New infections: ",Object(g.jsx)("span",{children:n.newCases})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["New deaths: ",Object(g.jsx)("span",{children:n.newDeaths})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total first vaccinations: ",Object(g.jsx)("span",{children:n.cumFirstVaccinations})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total second vaccinations: ",Object(g.jsx)("span",{children:n.cumSecondVaccinations})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["First vaccinations received on ",S(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(g.jsx)("span",{children:n.firstVaccinationsDaily})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["Second vaccinations received on ",S(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(g.jsx)("span",{children:n.secondVaccinationsDaily})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"btn btn-secondary btn-block",type:"button",onClick:a,children:"Close"})]})})},D=function(t){var a=t.handleClose,e=t.show,n=(t.children,e?"modal display-block":"modal display-none");return Object(g.jsx)("div",{className:n,children:Object(g.jsxs)("section",{className:"modal-main",children:[Object(g.jsx)("div",{className:"nationalStatTitle",children:Object(g.jsx)("h3",{children:"Info about UK Covid-19 Tracker"})}),Object(g.jsx)("br",{}),Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:"UK Covid-19 Tracker is an app designed, developed and maintained by Christopher Fynes"}),Object(g.jsx)("li",{children:"All data rendered in this app is received from the UK Government Coronavirus app"}),Object(g.jsx)("li",{children:"All latest statistics are recorded from the previous day"}),Object(g.jsx)("li",{children:"No data available for deaths within Welsh Local Authorities"})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"btn btn-secondary btn-block",type:"button",onClick:a,children:"Close"})]})})},N=function(t){var a=t.handleClose,e=t.show,n=t.children,s=t.laLocation,i=e?"modal display-block":"modal display-none";return Object(g.jsx)("div",{className:i,children:Object(g.jsxs)("section",{className:"modal-main",children:[Object(g.jsx)("div",{className:"nationalStatTitle",children:Object(g.jsxs)("h3",{children:["LA Statistics for ",s]})}),Object(g.jsx)("br",{}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total infections: ",Object(g.jsx)("span",{children:n.cumCases.toLocaleString()})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["Total deaths: ",Object(g.jsx)("span",{children:n.cumDeaths.toLocaleString()})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["New infections: ",Object(g.jsx)("span",{children:n.newCases.toLocaleString()})]}),Object(g.jsxs)("p",{className:"nationalStat",children:["New deaths: ",Object(g.jsx)("span",{children:n.newDeaths.toLocaleString()})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{className:"btn btn-secondary btn-block",type:"button",onClick:a,children:"Close"})]})})},k=function(t){Object(u.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=a.call(this,t)).state={show:!1,infoShow:!1},n.showModal=n.showModal.bind(Object(b.a)(n)),n.hideModal=n.hideModal.bind(Object(b.a)(n)),n.showInfo=n.showInfo.bind(Object(b.a)(n)),n.hideInfo=n.hideInfo.bind(Object(b.a)(n)),n.showLaModal=n.showLaModal.bind(Object(b.a)(n)),n.hideLaModal=n.hideLaModal.bind(Object(b.a)(n)),n}return Object(j.a)(e,[{key:"showModal",value:function(){this.setState({show:!0})}},{key:"hideModal",value:function(){this.setState({show:!1})}},{key:"showInfo",value:function(){this.setState({infoShow:!0})}},{key:"hideInfo",value:function(){this.setState({infoShow:!1})}},{key:"showLaModal",value:function(){this.setState({laShow:!0})}},{key:"hideLaModal",value:function(){this.setState({laShow:!1})}},{key:"render",value:function(){return Object(g.jsxs)("div",{id:"modalButton",className:"d-flex",children:[Object(g.jsx)(C,{show:this.state.show,handleClose:this.hideModal,children:{totalInfections:this.props.totalInfections.toLocaleString(),totalDeaths:this.props.totalDeaths.toLocaleString(),newCases:this.props.newCases.toLocaleString(),newDeaths:this.props.newDeaths.toLocaleString(),cumFirstVaccinations:this.props.cumFirstVaccinations.toLocaleString(),cumSecondVaccinations:this.props.cumSecondVaccinations.toLocaleString(),firstVaccinationsDaily:this.props.firstVaccinationsDaily.toLocaleString(),secondVaccinationsDaily:this.props.secondVaccinationsDaily.toLocaleString()}}),Object(g.jsx)(N,{show:this.state.laShow,handleClose:this.hideLaModal,children:this.props.regionalStats,laLocation:this.props.laLocation}),Object(g.jsx)(D,{show:this.state.infoShow,handleClose:this.hideInfo}),Object(g.jsx)("button",{id:"la-button",className:"dashButton btn btn-secondary",type:"button",onClick:this.showLaModal,children:"LA Info"}),Object(g.jsx)("button",{className:"dashButton btn btn-secondary",type:"button",onClick:this.showModal,children:"More national info"}),Object(g.jsx)("button",{className:"dashButton btn btn-secondary",type:"button",onClick:this.showInfo,children:"App info"})]})}}]),e}(s.a.Component),I=function(t){Object(u.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=a.call(this,t)).findTotal=Object(d.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/national");case 3:200===(a=t.sent).data.status?n.setState({totalDeaths:a.data.today.deathsCumulative,totalInfections:a.data.today.casesCumulative,newCases:a.data.today.casesDaily,newDeaths:a.data.today.deathsDaily,cumFirstVaccinations:a.data.yesterday.firstVaccinationsCumulative,cumSecondVaccinations:a.data.yesterday.secondVaccinationsCumulative,firstVaccinationsDaily:a.data.yesterday.firstVaccinationsDaily,secondVaccinationsDaily:a.data.yesterday.secondVaccinationsDaily}):alert("Sorry, currently unable able to access national information. Please try again later."),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),alert("Sorry, currently unable to access national information. Please try again later."),t.abrupt("return");case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),n.state={totalInfections:0,totalDeaths:0,newCases:0,newDeaths:0,cumFirstVaccinations:0,cumSecondVaccinations:0,firstVaccinationsDaily:0,secondVaccinationsDaily:0,countup:0},n.findTotal=n.findTotal.bind(Object(b.a)(n)),n}return Object(j.a)(e,[{key:"componentDidMount",value:function(){window.onload=this.findTotal()}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"pr-4 pt-2",children:[Object(g.jsxs)("p",{className:"headlineInfo mb-0 d-inline",children:["Total infections: ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:this.state.totalInfections,duration:.5,separator:","})})]}),Object(g.jsxs)("p",{className:"headlineInfo mb-0 d-inline",children:["Total deaths: ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:this.state.totalDeaths,duration:.5,separator:","})})]}),Object(g.jsx)(k,{totalInfections:this.state.totalInfections,totalDeaths:this.state.totalDeaths,newCases:this.state.newCases,newDeaths:this.state.newDeaths,cumFirstVaccinations:this.state.cumFirstVaccinations,cumSecondVaccinations:this.state.cumSecondVaccinations,firstVaccinationsDaily:this.state.firstVaccinationsDaily,secondVaccinationsDaily:this.state.secondVaccinationsDaily,regionalStats:this.props.regionalStats,laLocation:this.props.laLocation})]})}}]),e}(s.a.Component),L=(e(61),function(t){Object(u.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=a.call(this,t)).obtainNames=Object(d.a)(r.a.mark((function t(){var a,e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/localAuthorities");case 2:return a=t.sent,t.next=5,a.json();case 5:if(e=t.sent,200===a.status){t.next=8;break}throw Error(e.message);case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)}))),n.state={names:[],area:""},n.handleLocationChange=n.handleLocationChange.bind(Object(b.a)(n)),n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(j.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.obtainNames().then((function(a){return t.setState({names:a})})).catch((function(t){console.log(t),alert("Sorry, unable to communicate with the server. Please try again later.")}))}},{key:"handleLocationChange",value:function(){this.props.searchLocation(this.state.area)}},{key:"handleGetLAInformation",value:function(){this.props.findInfo(this.state.area)}},{key:"handleChange",value:function(t){var a=this;this.setState({area:t.target.value},(function(){a.handleLocationChange(),a.handleGetLAInformation()}))}},{key:"render",value:function(){var t=this.state.names.map((function(t){return Object(g.jsx)("option",{id:t.id,value:t.value,children:t.value})}));return Object(g.jsx)("div",{children:Object(g.jsx)("label",{for:"searchBar",children:Object(g.jsxs)("select",{className:"form-control",name:"localAuthority",onChange:this.handleChange,children:[Object(g.jsx)("option",{children:"Select an area"}),t]})})})}}]),e}(s.a.Component)),V=function(t){Object(u.a)(e,t);var a=Object(p.a)(e);function e(){var t;Object(h.a)(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=a.call.apply(a,[this].concat(s))).state={data:null},t}return Object(j.a)(e,[{key:"render",value:function(){return Object(g.jsxs)("div",{id:"header",className:"w-100% bg d-flex",children:[Object(g.jsx)("h3",{className:"displayText display-5 float-left",children:"UK Covid-19 Tracker"}),Object(g.jsx)(I,{regionalStats:this.props.regionalStats,laLocation:this.props.location}),Object(g.jsx)("div",{id:"mobileSelect",children:Object(g.jsx)(L,{searchLocation:this.props.searchLocation,findInfo:this.props.findInfo})})]})}}]),e}(s.a.Component);e(62);var T=function(t){return Object(g.jsx)("div",{id:"card1",className:"card w-25 z-index-3 m-5 border border-info shadow p-3 rounded",children:Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)(L,{searchLocation:t.searchLocation,findInfo:t.findInfo}),Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"textInfo",children:[Object(g.jsxs)("p",{className:"cardInfo",children:["Total infections: ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:t.regionalStats.cumCases,duration:.5,separator:","})})]}),Object(g.jsxs)("p",{className:"cardInfo",children:["Total deaths: ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:t.regionalStats.cumDeaths,duration:.5,separator:","})})]}),Object(g.jsxs)("p",{className:"cardInfo",children:["New cases on ",S(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:t.regionalStats.newCases,duration:.5,separator:","})})]}),Object(g.jsxs)("p",{className:"cardInfo",children:["New deaths on ",S(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(g.jsx)("span",{children:Object(g.jsx)(w.a,{end:t.regionalStats.newDeaths,duration:.5,separator:","})})]})]})})]})})};var M=function(t){var a=Object(n.useState)(null),e=Object(l.a)(a,2),s=e[0],i=e[1],c=Object(n.useState)(""),o=Object(l.a)(c,2),h=o[0],j=o[1],b=Object(n.useState)(null),u=Object(l.a)(b,2),p=u[0],f=u[1],v=Object(n.useState)(0),w=Object(l.a)(v,2),S=w[0],C=w[1],D=function(){var t=Object(d.a)(r.a.mark((function t(a){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(a),t.next=3,O.a.get("/location",{params:{location:a}});case 3:if(200===(e=t.sent).status){t.next=8;break}throw Error(e.message);case 8:f(e.data.geoJson),C(e.data.key),s.setView(e.data.coordinates,9);case 11:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)(V,{searchLocation:D,location:h,findInfo:t.findInfo,regionalStats:t.regionalStats}),Object(g.jsxs)(x.a,{id:"mapContainer",zoomControl:!1,center:[51.5074,.1278],zoom:6.5,whenCreated:i,children:[Object(g.jsx)(T,{searchLocation:D,location:h,findInfo:t.findInfo,regionalStats:t.regionalStats}),Object(g.jsx)(y.a,{url:"https://api.maptiler.com/maps/uk-openzoomstack-road/256/{z}/{x}/{y}.png?key=X7qpq0iR5R376h5yMZXo",attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">\xa9 MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">\xa9 OpenStreetMap contributors</a>'}),p&&Object(g.jsx)(m.a,{data:p},S)]})]})},F=function(t){Object(u.a)(e,t);var a=Object(p.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=a.call(this,t)).findInfo=function(){var t=Object(d.a)(r.a.mark((function t(a){var e,s,i,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/getLAdata",{params:{location:a}});case 3:for(200!==(e=t.sent).status&&alert("Sorry, cannot access information for ".concat(a," right now. Please try again later.")),s=0,i=Object.entries(e.data[0]);s<i.length;s++)c=Object(l.a)(i[s],2),o=c[0],null===c[1]&&(e.data[0][o]="Waiting for up to date information");n.setState({cumCases:e.data[0].cumCasesByPublishDate.toString(),cumDeaths:e.data[0].cumDeaths28DaysByPublishDate.toString(),newCases:e.data[0].newCasesByPublishDate.toString(),newDeaths:e.data[0].newDeaths28DaysByPublishDate.toString()}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(a){return t.apply(this,arguments)}}(),n.state={cumCases:"",cumDeaths:"",newCases:"",newDeaths:""},n.findInfo=n.findInfo.bind(Object(b.a)(n)),n}return Object(j.a)(e,[{key:"render",value:function(){return Object(g.jsx)("div",{children:Object(g.jsx)(M,{findInfo:this.findInfo,regionalStats:this.state,laLocation:this.state.laLocation})})}}]),e}(s.a.Component),A=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,69)).then((function(a){var e=a.getCLS,n=a.getFID,s=a.getFCP,i=a.getLCP,c=a.getTTFB;e(t),n(t),s(t),i(t),c(t)}))};c.a.render(Object(g.jsx)(F,{}),document.getElementById("root")),A()}},[[63,1,2]]]);
//# sourceMappingURL=main.9943524d.chunk.js.map