(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{20:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},57:function(t,e,a){},58:function(t,e,a){},61:function(t,e,a){},62:function(t,e,a){},63:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),c=a(18),i=a.n(c),o=(a(36),a(4)),r=a(5),l=a(7),d=a(6),h=(a(22),a(37),a(9)),u=a.n(h),j=a(11),b=a(10),p=a(66),f=a(67),O=a(68),m=a(13),x=a.n(m),v=(a(57),a(2)),w=(a(58),a(12)),y=a.n(w);a(20);var D=function(t){var e=t.split(" ")[0].split("-");return[e[2],e[1],e[0]].join("-")},S=a(0),C=function(t){var e=t.handleClose,a=t.show,n=t.children,s=a?"modal display-block":"modal display-none";return Object(S.jsx)("div",{className:s,children:Object(S.jsxs)("section",{className:"modal-main",children:[Object(S.jsx)("div",{className:"nationalStatTitle",children:Object(S.jsx)("h3",{children:"National Statistics for UK"})}),Object(S.jsx)("br",{}),Object(S.jsxs)("p",{className:"nationalStat",children:["Total infections: ",Object(S.jsx)("span",{children:n.totalInfections})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["Total deaths: ",Object(S.jsx)("span",{children:n.totalDeaths})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["New infections: ",Object(S.jsx)("span",{children:n.newCases})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["New deaths: ",Object(S.jsx)("span",{children:n.newDeaths})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["Total first vaccinations: ",Object(S.jsx)("span",{children:n.cumFirstVaccinations})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["Total second vaccinations: ",Object(S.jsx)("span",{children:n.cumSecondVaccinations})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["First vaccinations received on ",D(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(S.jsx)("span",{children:n.firstVaccinationsDaily})]}),Object(S.jsxs)("p",{className:"nationalStat",children:["Second vaccinations received on ",D(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(S.jsx)("span",{children:n.secondVaccinationsDaily})]}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{className:"btn btn-secondary btn-block",type:"button",onClick:e,children:"Close"})]})})},g=function(t){var e=t.handleClose,a=t.show,n=(t.children,a?"modal display-block":"modal display-none");return Object(S.jsx)("div",{className:n,children:Object(S.jsxs)("section",{className:"modal-main",children:[Object(S.jsx)("div",{className:"nationalStatTitle",children:Object(S.jsx)("h3",{children:"Info about UK Covid-19 Tracker"})}),Object(S.jsx)("br",{}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:"UK Covid-19 Tracker is an app designed, developed and maintained by Christopher Fynes"}),Object(S.jsx)("li",{children:"All data rendered in this app is received from the UK Government Coronavirus app"}),Object(S.jsx)("li",{children:"All latest statistics are recorded from the previous day"}),Object(S.jsx)("li",{children:"No data available for deaths within Welsh Local Authorities"})]}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{className:"btn btn-secondary btn-block",type:"button",onClick:e,children:"Close"})]})})},k=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={show:!1,infoShow:!1},n.showModal=n.showModal.bind(Object(v.a)(n)),n.hideModal=n.hideModal.bind(Object(v.a)(n)),n.showInfo=n.showInfo.bind(Object(v.a)(n)),n.hideInfo=n.hideInfo.bind(Object(v.a)(n)),n}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){if(void 0===this.props.currentInfections)return alert("Sorry, unable to access current statistics. Please try again later"),null}},{key:"showModal",value:function(){this.setState({show:!0})}},{key:"hideModal",value:function(){this.setState({show:!1})}},{key:"showInfo",value:function(){this.setState({infoShow:!0})}},{key:"hideInfo",value:function(){this.setState({infoShow:!1})}},{key:"render",value:function(){return Object(S.jsxs)("div",{id:"modalButton",className:"d-inline",children:[Object(S.jsx)(C,{show:this.state.show,handleClose:this.hideModal,children:{totalInfections:this.props.totalInfections.toLocaleString(),totalDeaths:this.props.totalDeaths.toLocaleString(),newCases:this.props.newCases.toLocaleString(),newDeaths:this.props.newDeaths.toLocaleString(),cumFirstVaccinations:this.props.cumFirstVaccinations.toLocaleString(),cumSecondVaccinations:this.props.cumSecondVaccinations.toLocaleString(),firstVaccinationsDaily:this.props.firstVaccinationsDaily.toLocaleString(),secondVaccinationsDaily:this.props.secondVaccinationsDaily.toLocaleString()}}),Object(S.jsx)(g,{show:this.state.infoShow,handleClose:this.hideInfo}),Object(S.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:this.showModal,children:"More national info"}),Object(S.jsx)("button",{className:"btn btn-secondary ml-4",type:"button",onClick:this.showInfo,children:"App info"})]})}}]),a}(s.a.Component),N=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).findTotal=Object(j.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("/national");case 2:if(200===(e=t.sent).status){t.next=8;break}return alert("Sorry, currently able to access national information. Please try again later."),t.abrupt("return");case 8:n.setState({totalDeaths:e.data.data[0].deathsCumulative,totalInfections:e.data.data[0].casesCumulative,newCases:e.data.data[0].casesDaily,newDeaths:e.data.data[0].deathsDaily,cumFirstVaccinations:e.data.data[1].firstVaccinationsCumulative,cumSecondVaccinations:e.data.data[1].secondVaccinationsCumulative,firstVaccinationsDaily:e.data.data[1].firstVaccinationsDaily,secondVaccinationsDaily:e.data.data[1].secondVaccinationsDaily});case 9:case"end":return t.stop()}}),t)}))),n.state={totalInfections:0,totalDeaths:0,newCases:0,newDeaths:0,cumFirstVaccinations:0,cumSecondVaccinations:0,firstVaccinationsDaily:0,secondVaccinationsDaily:0,countup:0},n.findTotal=n.findTotal.bind(Object(v.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.onload=this.findTotal()}},{key:"render",value:function(){return Object(S.jsxs)("div",{className:"pr-4 pt-2",children:[Object(S.jsxs)("p",{className:"headlineInfo mb-0 d-inline",children:["Total infections in UK: ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.totalInfections,duration:.5,separator:","})})]}),Object(S.jsxs)("p",{className:"headlineInfo mb-0 d-inline",children:["Total deaths in UK: ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.totalDeaths,duration:.5,separator:","})})]}),Object(S.jsx)(k,{totalInfections:this.state.totalInfections,totalDeaths:this.state.totalDeaths,newCases:this.state.newCases,newDeaths:this.state.newDeaths,cumFirstVaccinations:this.state.cumFirstVaccinations,cumSecondVaccinations:this.state.cumSecondVaccinations,firstVaccinationsDaily:this.state.firstVaccinationsDaily,secondVaccinationsDaily:this.state.secondVaccinationsDaily})]})}}]),a}(s.a.Component),I=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={data:null},t}return Object(r.a)(a,[{key:"render",value:function(){return Object(S.jsxs)("div",{id:"header",className:"w-100% bg",children:[Object(S.jsx)("h3",{className:"display-5 float-left",children:"UK Covid-19 Tracker"}),Object(S.jsx)(N,{})]})}}]),a}(s.a.Component),V=(a(61),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).obtainNames=Object(j.a)(u.a.mark((function t(){var e,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/localAuthorities");case 2:return e=t.sent,t.next=5,e.json();case 5:if(a=t.sent,200===e.status){t.next=8;break}throw Error(a.message);case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)}))),n.state={names:[],area:""},n.handleLocationChange=n.handleLocationChange.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.obtainNames().then((function(e){return t.setState({names:e})})).catch((function(t){console.log(t),alert("Sorry, unable to communicate with the server. Please try again later.")}))}},{key:"handleLocationChange",value:function(){this.props.searchLocation(this.state.area)}},{key:"handleGetLAInformation",value:function(){this.props.findInfo(this.state.area)}},{key:"handleChange",value:function(t){var e=this;this.setState({area:t.target.value},(function(){e.handleLocationChange(),e.handleGetLAInformation()}))}},{key:"render",value:function(){var t=this.state.names.map((function(t){return Object(S.jsx)("option",{id:t.id,value:t.value,children:t.value})}));return Object(S.jsx)("div",{children:Object(S.jsx)("label",{for:"searchBar",children:Object(S.jsxs)("select",{className:"form-control",name:"localAuthority",onChange:this.handleChange,children:[Object(S.jsx)("option",{children:"Select an area"}),t]})})})}}]),a}(s.a.Component)),T=(a(62),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).findInfo=function(){var t=Object(j.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("http://localhost:5000/getLAdata",{params:{location:e}});case 2:if(200===(a=t.sent).status){t.next=7;break}throw Error(a.message);case 7:n.setState({cumCases:a.data.data[0].cumCasesByPublishDate,cumDeaths:a.data.data[0].cumDeaths28DaysByPublishDate,newCases:a.data.data[0].newCasesByPublishDate,newDeaths:a.data.data[0].newDeaths28DaysByPublishDate});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.state={cumCases:0,cumDeaths:0,newCases:0,newDeaths:0},n.findInfo=n.findInfo.bind(Object(v.a)(n)),n}return Object(r.a)(a,[{key:"render",value:function(){return Object(S.jsx)("div",{id:"card1",className:"card w-25 z-index-3 m-5 border border-info shadow p-3 rounded",children:Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)(V,{searchLocation:this.props.searchLocation,findInfo:this.findInfo}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"textInfo",children:[Object(S.jsxs)("p",{className:"cardInfo",children:["Total infections: ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.cumCases,duration:.5,separator:","})})]}),Object(S.jsxs)("p",{className:"cardInfo",children:["Total deaths: ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.cumDeaths,duration:.5,separator:","})})]}),Object(S.jsxs)("p",{className:"cardInfo",children:["New cases on ",D(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.newCases,duration:.5,separator:","})})]}),Object(S.jsxs)("p",{className:"cardInfo",children:["New deaths on ",D(new Date(Date.now()-864e5).toISOString().split("T")[0]),": ",Object(S.jsx)("span",{children:Object(S.jsx)(y.a,{end:this.state.newDeaths,duration:.5,separator:","})})]})]})})]})})}}]),a}(s.a.Component));var L=function(){var t=Object(n.useState)(null),e=Object(b.a)(t,2),a=e[0],s=e[1],c=Object(n.useState)(""),i=Object(b.a)(c,2),o=i[0],r=i[1],l=Object(n.useState)(null),d=Object(b.a)(l,2),h=d[0],m=d[1],v=Object(n.useState)(0),w=Object(b.a)(v,2),y=w[0],D=w[1],C=function(){var t=Object(j.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(e),t.next=3,x.a.get("/location",{params:{location:e}});case 3:if(200===(n=t.sent).status){t.next=8;break}throw Error(n.message);case 8:m(n.data.geoJson),D(n.data.key),a.setView(n.data.coordinates,9);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)(I,{}),Object(S.jsxs)(f.a,{id:"mapContainer",zoomControl:!1,center:[51.5074,.1278],zoom:6.5,whenCreated:s,children:[Object(S.jsx)(T,{searchLocation:C,location:o}),Object(S.jsx)(O.a,{url:"https://api.maptiler.com/maps/uk-openzoomstack-road/256/{z}/{x}/{y}.png?key=X7qpq0iR5R376h5yMZXo",attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">\xa9 MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">\xa9 OpenStreetMap contributors</a>'}),h&&Object(S.jsx)(p.a,{data:h},y)]})]})},M=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(S.jsx)("div",{children:Object(S.jsx)(L,{})})}}]),a}(s.a.Component),F=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,69)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),s(t),c(t),i(t)}))};i.a.render(Object(S.jsx)(M,{}),document.getElementById("root")),F()}},[[63,1,2]]]);
//# sourceMappingURL=main.9939930f.chunk.js.map